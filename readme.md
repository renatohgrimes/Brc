# The One Billion Row Challenge

This is my take on the 1BRC, implemented in C#, net8.0

It was inspired by https://github.com/gunnarmorling/1brc

And by https://github.com/praeclarum/1brc (.NET Edition)

I wanted to take on the challenge over the weekend, so I wrote the entire solution without using unsafe code and aimed to make it as fast as possible. ðŸ™‚

To reduce allocations, I avoided using strings and instead used CRC32 hashes to map city names to weather data structs and parallelized file reading by file segments.

## Running

```
dotnet build -c Release <num_of_concurrent_readers:int> <measurements_file_path:string> <print_progress:bool>
```

You can generate a mock measurements.txt file using the provided Python script:

```
python3 generator.py
```

## Tests

For testing, I used the mock measurements.txt file generated by generator.py

### Specs
```
OS: Ubuntu 24.04.2 LTS x86_64 
Kernel: 6.14.0-24-generic
CPU: Intel i5-7200U (4) @ 3.100GHz
SSD: KINGSTON SA400S37240G
```

### Command
```
dotnet build -c Release 3 measurements.txt
```

### Results
```
Test #1
real    2m43.172s
user    7m2.995s
sys     0m6.705s

Test #2
real    2m45.129s
user    7m11.776s
sys     0m5.802s

Test #3
real    2m42.847s
user    6m48.140s
sys     0m7.403s

```

If I had run this on a 2017 iMac Pro with a Xeon W processor, like the .NET Edition did, I believe the results wouldâ€™ve been close to the Top 10. 
